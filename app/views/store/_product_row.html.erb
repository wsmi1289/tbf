<% cache ['store', Product.latest] do %>
  <% @products.each do |product| %>
    <% cache ['entry', product] do %>
      <tr>
        <td><%= product.title %></td>
        <td><%= product.category %></td>
        <td><%= product.description %></td>
        <td><%= number_to_currency(product.price) %></td>
        <td>
          <%= check_box_tag('in_stock', "true", product.in_stock, 
                          data: {
                                  id: product.id,
                                  remote: true,
                                  url: url_for(
                                    controller: 'products',
                                    action: 'toggle',
                                    id: product.id),
                                  method: "POST"
                                }) %>
        </td>
        <td>
          <%= link_to 'Edit', edit_product_path(product), class: 'btn btn-light' %>
        </td>
      </tr>
    <% end -%>
  <% end %>
<% end -%>