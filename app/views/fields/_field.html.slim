.row
	.col.d-flex.justify-content-around
		h3 = field.name
		h6.text-muted.mt-2 #{field.planted_beds} Beds
	.col
		= link_to 'Edit', edit_field_path(field), class: 'btn btn-lg btn-light'
	.col
		= link_to 'Delete', field, method: :delete, class: 'btn btn-lg btn-light', data: { confirm: "Are You Sure?" }
.row
	.col-md-12.mt-3
		.field id="field-#{field.id}" style="height: #{field.width}px; width: #{field.length}px;"
			- field.plantings.each do |planting|
				= render 'plantings/planting', planting: planting
		.slide class="slider-#{field.id}" style="width: #{field.length}px;"
			.ui-slider-handle#left-handle
			.ui-slider-handle#right-handle
		span id="date-#{field.id}" style="width: #{field.length}px;"
			label for="date" Date range:
javascript:
	$(function () {

    var today = new Date(),
          day = today.getDate(),
        month = today.getMonth(),
         year = today.getFullYear(),
       future = today.setFullYear(year, month+8, day),
          now = today.setFullYear(year, month-2, day);
    $(".slider-#{field.id}").slider({
      range: true,
      min: now,
      max: future,
      values: [ now, future ],
      slide: function( event, ui ) {
        $( "#date-#{field.id}" ).html(
          "Start: " + dateConvert(ui.values[ 0 ]) +
          " - End: " + dateConvert(ui.values[ 1 ])
        );
        renderPlantings(ui);
      },
      stop: function(event, ui) {}
    });

    var dateConvert = function (date) {
      return new Date(date).toDateString().substring(4);
    };

    var matchCrop = function (crop) {
      return this.crop_id === crop[0];
    };

    var renderPlantings = function (ui) {
      _.each(#{raw field.plantings.to_json}, function (p) {
        var start_date = new Date(p.transplanted_at).getTime(),
              end_date = new Date(p.harvested_at).getTime(),
              planting = $('.planting-hover[data-planting="'+ p.id +'"]');

        if ((ui.values[0] <= end_date) && (ui.values[1] >= start_date)) {
          planting.removeClass('hidden');
        } else {
          planting.addClass('hidden');
        }
      });

    };
  });